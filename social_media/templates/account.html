{% extends 'base.html' %}

{% block title %}Mon Compte - Z{% endblock %}

{% block content %}
<!-- Main Content Area -->
<div class="flex-1 max-w-2xl border-x border-x-border">
    <!-- Header -->
    <div class="sticky top-0 bg-x-black/80 backdrop-blur-md border-b border-x-border p-4">
        <h1 class="text-xl font-bold">Mon Compte</h1>
    </div>
    
    <!-- Profile Content -->
    <div class="p-6">
        <!-- Profile Header -->
        <div class="bg-x-darker rounded-xl p-6 mb-6">
            <div class="flex items-start space-x-4">
                <!-- Avatar -->
                <div class="flex-shrink-0">
                    {% if profile.avatar %}
                        <img src="{{ profile.avatar.url }}" alt="Avatar" class="w-20 h-20 rounded-full object-cover border-2 border-x-border">
                    {% else %}
                        <div class="w-20 h-20 rounded-full bg-x-gray flex items-center justify-center">
                            <svg class="w-10 h-10 text-x-light-gray" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </div>
                    {% endif %}
                </div>
                
                <!-- User Info -->
                <div class="flex-1">
                    <h2 class="text-2xl font-bold text-white mb-1">{{ user.username }}</h2>
                    <p class="text-x-gray mb-3">@{{ user.username }}</p>
                    
                    <!-- Bio -->
                    {% if profile.bio %}
                        <p class="text-white mb-3">{{ profile.bio }}</p>
                    {% else %}
                        <p class="text-x-gray mb-3 italic">Aucune biographie</p>
                    {% endif %}
                    
                    <!-- Location and Join Date -->
                    <div class="flex items-center space-x-4 text-x-gray text-sm">
                        {% if profile.city %}
                            <div class="flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg>
                                {{ profile.city }}
                            </div>
                        {% endif %}
                        
                        <div class="flex items-center">
                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 3h-4v4h4V6z"/>
                            </svg>
                            Membre depuis {{ user.date_joined|date:"F Y" }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Account Details -->
        <div class="bg-x-darker rounded-xl p-6 mb-6">
            <h3 class="text-lg font-semibold text-white mb-4">Informations du compte</h3>
            <div class="space-y-3">
                <div class="flex justify-between items-center py-2 border-b border-x-border">
                    <span class="text-x-light-gray">Email</span>
                    <span class="text-white">{{ user.email }}</span>
                </div>
                <div class="flex justify-between items-center py-2 border-b border-x-border">
                    <span class="text-x-light-gray">Nom d'utilisateur</span>
                    <span class="text-white">{{ user.username }}</span>
                </div>
                <div class="flex justify-between items-center py-2">
                    <span class="text-x-light-gray">Date d'inscription</span>
                    <span class="text-white">{{ user.date_joined|date:"d/m/Y" }}</span>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex space-x-4">
            <a href="{% url 'profile_edit' %}" 
               class="flex-1 bg-x-blue hover:bg-x-blue-hover text-white font-bold py-3 px-6 rounded-full text-center transition-colors">
                Modifier le profil
            </a>
            
            <form method="post" action="{% url 'logout' %}" class="flex-1">
                {% csrf_token %}
                <button type="submit" 
                        class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-full transition-colors"
                        onclick="return confirm('Voulez-vous vraiment vous déconnecter ?')">
                    Se déconnecter
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Right Sidebar -->
<div class="w-80 p-4">
    <div class="bg-x-darker rounded-xl p-4">
        <h3 class="text-lg font-bold text-white mb-3">Statistiques</h3>
        <div class="space-y-2">
            <div class="flex justify-between">
                <span class="text-x-gray">Tweets</span>
                <span class="text-white font-semibold">{{ user.userprofile.tweets.count }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-x-gray">Abonnés</span>
                <span class="text-white font-semibold">0</span>
            </div>
            <div class="flex justify-between">
                <span class="text-x-gray">Abonnements</span>
                <span class="text-white font-semibold">0</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
