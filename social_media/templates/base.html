<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Z{% endblock %}</title>
    
    <!-- Favicon -->
    {% load static %}
    <link rel="icon" type="image/svg+xml" href="{% static 'images/logo-z.svg' %}">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Thème City - Violet/Indigo foncé
                        'x-black': '#2d2b3e',           // Fond principal violet foncé
                        'x-dark': '#252238',            // Fond secondaire plus foncé
                        'x-darker': '#3a3650',          // Fond des cartes/éléments
                        'x-blue': '#7c3aed',            // Violet principal (accent)
                        'x-blue-hover': '#6d28d9',     // Violet hover
                        'x-blue-dark': '#5b21b6',      // Violet foncé
                        'x-purple': '#8b5cf6',          // Violet clair
                        'x-purple-light': '#a78bfa',   // Violet très clair
                        'x-white': '#ffffff',           // Blanc pur
                        'x-light-gray': '#9ca3af',     // Texte secondaire
                        'x-gray': '#6b7280',           // Texte gris
                        'x-border': '#4b5563',         // Bordures
                        'x-border-light': '#6b7280',   // Bordures claires
                        'x-text': '#f3f4f6',           // Texte principal clair
                        'x-text-secondary': '#9ca3af'   // Texte secondaire
                    }
                }
            }
        }
    </script>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-x-black text-x-text h-full">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-x-black border-r border-x-border flex flex-col shadow-sm fixed h-full overflow-y-auto">
            <!-- Logo -->
            <div class="p-4">
                <a href="{% url 'core:home' %}" class="block">
                    <img src="{% static 'images/logo-z.png' %}" alt="Z" class="w-12 h-12">
                </a>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 px-4">
                <ul class="space-y-2">
                    <li>
                        <a href="{% url 'core:home' %}" class="flex items-center px-3 py-3 rounded-full hover:bg-x-darker transition-colors text-x-text hover:text-x-blue">
                            <svg class="w-6 h-6 mr-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                            </svg>
                            Accueil
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'user_search' %}" class="flex items-center px-3 py-3 rounded-full hover:bg-x-darker transition-colors text-x-text hover:text-x-blue">
                            <svg class="w-6 h-6 mr-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            Rechercher
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'notifications:list' %}" class="flex items-center px-3 py-3 rounded-full hover:bg-x-darker transition-colors text-x-text hover:text-x-blue relative">
                            <svg class="w-6 h-6 mr-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                            </svg>
                            Notifications
                            {% if notifications_unread_count > 0 %}
                                <span class="absolute top-1 left-7 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">
                                    {{ notifications_unread_count|default:"" }}
                                </span>
                            {% endif %}
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'profile' %}" class="flex items-center px-3 py-3 rounded-full hover:bg-x-darker transition-colors text-x-text hover:text-x-blue">
                            <svg class="w-6 h-6 mr-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                            Profil
                        </a>
                    </li>
                </ul>
        
            </nav>
            
            <!-- User Profile -->
            <div class="p-4 border-t border-x-border">
                {% if user.is_authenticated %}
                    <a href="{% url 'profile' %}" class="flex items-center justify-between hover:bg-x-darker rounded-full p-3 cursor-pointer transition-colors">
                        <div class="flex items-center">
                            {% if user.profile.avatar %}
                                <img src="{{ user.profile.avatar.url }}" class="w-10 h-10 rounded-full object-cover" alt="Avatar">
                            {% else %}
                                <div class="w-10 h-10 rounded-full bg-x-darker flex items-center justify-center">
                                    <svg class="w-5 h-5 text-x-gray" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                </div>
                            {% endif %}
                            <div class="ml-3">
                                <div class="font-bold text-x-text">{{ user.username }}</div>
                                <div class="text-x-gray text-sm">@{{ user.username }}</div>
                            </div>
                        </div>
                        <svg class="w-5 h-5 text-x-gray" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"/>
                        </svg>
                    </a>
                {% else %}
                    <div class="space-y-2">
                        <a href="{% url 'login' %}" class="block w-full bg-x-blue hover:bg-x-blue-hover text-white font-bold py-2 px-4 rounded-full text-center transition-colors">
                            Se connecter
                        </a>
                        <a href="{% url 'register' %}" class="block w-full border border-x-border hover:bg-x-darker text-x-text font-bold py-2 px-4 rounded-full text-center transition-colors">
                            S'inscrire
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 flex ml-64">
            {% block content %}{% endblock %}
        </div>
    </div>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
